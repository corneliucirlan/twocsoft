'use strict';

jQuery(document).ready(function ($) {

    var $menuToggler = $('.navbar-toggler'),
        $headerMenu = $('.navbar-nav-header'),
        activateClass = 'active';

    $menuToggler.on('click', function () {

        $headerMenu.toggleClass(activateClass);
        $menuToggler.toggleClass(activateClass);
    });

    $('.social-link').on('click', function (event) {
        event.preventDefault();

        var popup = { width: 500, height: 350 };
        window.open($(this).find('a').attr('href'), '', 'toolbar=no, location=yes, status=no, scrollbars=no, resizable=yes, left=10, top=10, width=' + popup.width + ', height=' + popup.height);
    });

    $('.form-group input, textarea').focusout(function () {

        var textValue = $(this).val();

        if (textValue === '') {
            $(this).removeClass('has-value');
        } else {
            $(this).addClass('has-value');
        }
    });

    $('#contact-form').on('submit', function (event) {
        event.preventDefault();

        var $formParent = $('.page-contact-form'),
            $submitButton = $('#submit-form'),
            sendMessage = 'Send message',
            loadingSpinner = '<span class="loading-spinner"></span>',
            mailFail = '<i class="fas fa-times"></i>',
            mailSuccess = '<i class="fas fa-check"></i>',
            hasValue = 'has-value',
            btnError = 'btn-error',
            btnSuccess = 'btn-success',
            btnProcessing = 'btn-processing';

        // Get form data
        var data = $(undefined).serialize();

        $.ajax({
            url: ajaxurl,
            type: 'POST',
            dataType: 'json',
            data: data,
            beforeSend: function beforeSend() {

                // Disable all fields
                $('input, textarea').prop('disabled', true);

                // Update button's content
                $submitButton.html(loadingSpinner);
            }
        }).done(function (data, textStatus, jqXHR) {
            if (data.emailSent) {
                $submitButton.removeClass('btn-error btn-processing').addClass('btn-success').html(mailSuccess);
            } else {
                $submitButton.removeClass('btn-processing btn-success').addClass('btn-error').html(mailFail);
            }
        }).fail(function (jqXHR, textStatus, errorThrown) {
            $submitButton.removeClass('btn-processing btn-success').addClass('btn-error').html(mailFail);
        }).always(function (data, textStatus) {

            // Reset inputs
            if ('success' === textStatus) {
                $('#contact-form')[0].reset();
            }

            $('button, input, textarea').prop('disabled', false).removeClass('has-value');
            setTimeout(function () {
                $submitButton.html(sendMessage).removeClass('btn-error btn-success');
            }, 4000);
        });
    });
});

// Opening jQuery
//@codekit-prepend "jquery-header.js"

// Mobile menu
//@codekit-prepend "mobile-menu.js"

// Social share
//@codekit-prepend "social-share.js"

// Contact form processing
//@codekit-prepend "contact-form.js"

// Closing jQuery
//@codekit-prepend "jquery-footer.js"
//# sourceMappingURL=javascript.min.js.map